### Version [2.29.2-mod3] - 2024-04-18

* Fix nil error
* Fixed missing aura feature not recognizing current party member class
* Added raid buffs to presets in buff group.
* Fix Queue module not turning on/off. 
* Deleting unnecessary Queues.


### Version [2.29.2-mod2] - 2024-04-17

* Added play only when dispelable to the play sound option of the debuffhighlight module
* Added voices for each language.


### Version [2.29.2-mod1] - 2024-04-16

* Allows you to choose whether to use the queue feature or not
* Changed baricon's handling of tooltips to not use the show/hide event.
* Added missing aura features to classic
* Fixed a bug with Missing Aura
* Merged RFS v2.29.2


### Version [2.29.1-mod1] - 2024-04-15

* Merged RFS v2.29.0
* Merged RFS v2.29.1
* Fix nil errors 
* DebuffHighlight - Fixed dispel spells having incorrect cooldown checks 
* DebuffHighlight - Added playing sound when dispel is possible 
* Move the Texture to the media folder and add the sounds files.
* Added default raid buffs to missing auras
* Duplicate handling when adding alter spells for missing auras.


### Version [2.28.0-mod6] - 2024-04-13

* Adjusts the interval value based on the number of cooldown timers being displayed.
* Fixed a Queue bug.
* Handling buff/debuff functions as queues.
* Turn off highlights after using the dispel spell.


### Version [2.28.0-mod5] - 2024-04-13

* Fixed missing aura bug. 
* Queue-related adjustments.


### Version [2.28.0-mod4] - 2024-04-12

* Fixed missingAura always being off
* Added the helper/Queue.lua and using queues for both showing and hiding auras
* Added disable to select by debuff in debuff highlight module.
* Added the option to set an alternate ID for missing auras 


### Version [2.28.0-mod3] - 2024-04-11

* Fix nil erros


### Version [2.28.0-mod2] - 2024-04-10

* Hide when cooldown count under 0
* If an aura added to an aura position & aura group already exists in an aura filter, no temporary additions are made internally
* Time-slicing cooldown display to avoid lag
* Remove AuraHighlight and Add DebuffHighlight Module & MissingAura option to the buff module


### Version [2.28.0-mod1] - 2024-04-08

* Merged RFS v2.28.0
* Applying filters to the test mode of an aura frame
* Fixed for aura frame tooltip


### Version [2.27.3-mod2] - 2024-04-07

* Clean up code and add aura test mode
* Fixed an error applying aurafilter in Classic.


### Version [2.27.3-mod1] - 2024-04-07

* Merged RFS v2.27.1
* Merged RFS v2.27.2
* Merged RFS v2.27.3
* Improve aura frame performance for classic


### Version [2.27.0-mod4] - 2024-04-06

* Fix ADDON_BLOCKED_ERROR


### Version [2.27.0-mod3] - 2024-04-06

* Improve aura frame performance
* Fixed Blizzard default aura frame settings error


### Version [2.27.0-mod2] - 2024-04-06

* Improve aura frame performance
* Fixed Refrash animation displaying incorrectly when tracking a buff on a Restoration Druid


### Version [2.27.0-mod1] - 2024-04-04

* Merged RFS v2.27.0
* Improve aura frame performance
* Add dispel debuff icon display to options
* Fix aurahighlight module error
* Fixed generating a frame whenever disabling/enabling solo module


### Version [2.26.1-mod3] - 2024-04-03

* Improving AURA module efficiency. 
* Fixed pet healthbar color error.
* Apply missing auras only when player.


### Version [2.26.1-mod2] - 2024-04-02

* Adding parts missed in v2.26.1 merge
* Fixed missing aura not being applied when group roster is changed


### Version [2.26.1-mod1] - 2024-04-01

* Fixed tooltips on Classic showing spell info instead of buff info
* Fixed issues with aurahighlight not being applied
* Merged RFS v2.26.0
* Merged RFS v2.26.1
* handling tooltip when mouse is left on baricon aura in classic
* Fix taint error in solo module in classic


### Version [2.25.1-mod4] - 2024-03-31

* Add spellcache handling code when weakauras options addon is not present


### Version [2.25.1-mod3] - 2024-03-31

*  Enable the Show tooltip option for classic


### Version [2.25.1-mod2] - 2024-03-31

* Fixed error when getting spellid with spellname


### Version [2.25.1-mod1] - 2024-03-30

* Merged RFS v2.22.6
* Merged RFS v2.23.0
* Merged RFS v2.24.0
* If an aura registered in Aura Position, Aura Group is not registered in AuraFilter, register it internally to prevent it from being filtered
* Merged RFS v2.24.2
* Removed the code and settings I added for the minimap icon feature as it was redundant.
* Merged RFS v2.25.0
* Added group feature to AuraFilter 
* Added presets for healer buffs, external defensives, etc. and made them importable in AuraFilter and Aura Group
* Merged RFS v2.25.1
* Added ability to enter order name in the order ID field


### RFS Changes from v2.22.5 

* Add the setting to "Settings > Add-ons" 
* Add a minimap icon
* If you try to open the options window while in combat, it will automatically open after you finish.
* Adding multiple languages (korean)

* Font Module
  - Fix to revert to original font on non-English clients on module disable

* Healthbar Module
  - Fixed an issue where raids would sometimes fail to apply 

* AuraHighlight Module
  - The default action changes the color of the health bar and adds a border glow option (you can check the health bar color and border glow in the options)

* Overabsorb Module
  - Specify the position of the indicator when shields (absorption) exceed maximum health
    - Blizzard Default: Right end of Health Bar
    - RFS Default: Shift left on health bar by amount of absorption
    - Optional: Shift to the left only by the amount of health exceeded

* RaidMark Module (New)
  - Show Raid Mark Icon in Raid Frame Module

* Solo Module (New)
  - Module to display raid frames even when playing solo 

* Sort Module (New)
  - Modules to change the order of party members to your favor

* Aura Module 
  - Using custom aura frames instead of Blizzard default aura frames (due to taint issues)
  - Increased the number of aura frames
  - Added option to modify frame strata
  - Added aura frames in the form of a bar icon (you can also choose the default Blizzard format)
  - Tooltip display on/off + tooltip position option (mouse position or default tooltip position)
  - Added jump animation when refreshing aura
  - Added frame selection, icon size, transparency, glow options to attach frame to aura position
  - Added aura group (different from aura position, you can add multiple auras)
  - Apply increase from debuff module to buff module
  - Apply aura position from buff module to debuff module
  - Added features specific to Restoration Druids (mastery stack display, empowered rejuvenation, regrowth, wild growth tracking)

* AuraFilter Module (New)
  - This module was added in v2.22.2, replacing Blacklist and Watchlist, which were added in v2.22.4.
  - Changes Blizzard's aura display settings, allowing you to show auras that were filtered out or not show auras that were visible
  - Can show other player's buffs
  - When the aura module is active, you can also set the order of aura display, transparency, and glow options

* Blacklist, Watchlist Module (deleted)
  - Replaced by the AuraFilter module 

---

### v2.29.2-mod3

* nil error 수정
* 없는 오라 추적 기능에서 현재 파티원 클래스를 인식못하던 문제 수정
* 버프 모듈의 오라 그룹에 레이드 버프 프리셋 추가
* 큐 모듈이 on/off가 안되던 문제 수정
* 불필요한 큐 삭제


### v2.29.2-mod2

* 디버프하이라이트 모듈의 음성 재생 옵션에 해제 가능할떄만 재생하는 옵션 추가
* 각 언어별로 음성 파일 추가 


### v2.29.2-mod1

* Queue 기능 사용 여부를 선택할수 있게 함 
* baricon 타잎의 aura의 툴팁 처리 방법을 show/hide 이벤트 기반에서 다른방식으로 변경
* 없는 오라 추적기능을 클래식 버전에 추가 
* 없는 오라 추적기능 버그 수정
* RFS v2.29.2 병합


### v2.29.1-mod1

* RFS v2.29.0 병합
* RFS v2.29.1 병합
* nil 에러들 수정
* 디버프 하이라이트 - 해제 스킬의 쿨다운 체크가 잘못되고 있던것 수정
* 디버프 하이라이트 - 해제 가능할때 음성 재생 추가
* 텍스쳐를 Media폴더로 이동, 음성 파일들 Media폴더에 추가
* 레이드 버프들을 없는 오라 추적에 추가
* 없는 오라 추적에서 대체 스펠ID 추가 중복 방지


### v2.28.0-mod6

* 표시중인 쿨다운 타이머수에 따라 인터벌값을 조정하게함 
* Queue 버그 수정
* buff/debuff 대부분 함수를 Queue를 이용해서 처리
* 해제 스킬 사용후 해당되는 하이라이트는 끔


### v2.28.0-mod5

* 없는 오라 추적시 대체 ID 처리가 잘못되는것 수정
* Queue 관련 개선


### v2.28.0-mod4

* 없는 오라 추적이 항상 꺼져 있는 버그 수정 
* helper/Queue.lua 추가하고 오라를 보여주거나 숨길때 큐를 이용해서 시분할 처리
* 디버프 하이라이트 모듈의 디버프 종류별 설정에 사용 안함 옵션 추가
* 없는 오라 추적에 대체 ID 입력 옵션 추가


### v2.28.0-mod3

* nil 에러 수정


### v2.28.0-mod2

* 오라프레임의 남은 시간이 0보다 작아지면 글자 숨김
* 오라 위치 & 오라 그룹에 추가된 오라가 오라 필터에 이미 있다면 내부적으로 임시추가를 하지 않음
* 오라 쿨다운 & 남은시간 표시를 시분할 처리해서 렉 발생을 최소화 함 
* 오라 하이라이트 모듈 삭제 -> 디버프 하이라이트 모듈 추가, 버프 모듈에 없는 오라 추적 추가 


### v2.28.0-mod1

* RFS v2.28.0 병합
* 오라 프레임의 테스트 모드에 오라 필터 적용
* 오라 프레임 툴팁 관련 오류 수정


### v2.27.3-mod2

* 코드 정리 및 오라 프레임 테스트 모드 추가
* 오라 필터가 클래식에서 에러가 나오던것 수정


### v2.27.3-mod1

* RFS v2.27.1 병합
* RFS v2.27.2 병합
* RFS v2.27.3 병합
* 클래식에서 오라 프레임 성능 개선


### v2.27.0-mod4

* ADDON_BLOCKED_ERROR 수정


### v2.27.0-mod3

* 오라 프레임 성능 개선
* 블리자드 기본 오라 프레임 사용시 나오는 오류 수정


### v2.27.0-mod2

* 오라 프레임 성능 개선
* 회드일때 버프를 추적하는경우 갱신 애니메이션이 잘못 표시되던 문제 수정


### v2.27.0-mod1

* RFS v2.27.0 병합
* aura 프레임 성능 개선
* 옵션에 해제가능한 디버프 아이콘 표시 기능 추가
* 오라 하이라이트 모듈 에러 수정
* 솔로 묘듈을 껏다 켤때마다 프레임을 생성하던 문제 수정


### v2.26.1-mod3

* aura frame 효율 개선
* 펫 체력바 색상 오류 수정
* missing aura는 플레이어일떄만 적용


### v2.26.1-mod2

* RFS v2.26.1 병합하면서 누락된 부분 추가
* 파티원 변경시 missing aura가 적용안되는것 수정


### v2.26.1-mod1

* 클래식에서 툴팁이 버프가 아니라 주문정보가 나오던것 수정
* 오라 하이라이트가 잘못 적용되던것 수정 
* RFS v2.26.0 병합
* RFS v2.26.1 병합
* 클래식에서 툴팁밖으로 마우스가 나갈때 처리 부분 수정
* 클래식에서 솔로 모듈의 taint 에러 수정


### v2.25.1-mod4

* Weakauras 애드온이 없을때 spellcache를 자체 구현


### v2.25.1-mod3

* 클래식에서도 오라에 툴팁이 표시


### v2.25.1-mod2 

* 주문명으로 주면ID를 가져올떄 에러 수정


### v2.25.1-mod1

* RFS v2.22.6 병합
* RFS v2.23.0 병합
* RFS v2.24.0 병합
* Aura Position, Aura Group에 등록된 aura는 AuraFilter에 등록되지 않은경우 내부적으로 등록을 해서 필터링 되지 않게 함
* RFS v2.24.2 병합
* 내가 추가한 미니맵 아이콘 기능은 중복되기 때문에 코드와 설정을 삭제함
* RFS v2.25.0 병합
* 오라필터에 그룹 기능 추가 
* 힐러스킬, 외부생존기등 프리셋을 추가하고 오라필터 및 오라그룹에서 가져올수 있게함
* RFS v2.25.1 병합
* 주문ID 입력란에 주문명도 입력할수 있게함


# v2.22.5 버전 대비 변경점

* 설정 > 애드온에 설정 추가 
* 미니맵 아이콘 추가
* 전투중 옵션창 실행시 전투가 종료되면 표시함
* 다국어 추가 (한국어)

* 글꼴 모듈 
  - 모듈 disable시 영어가 아닌 클라이언트에서 원래 폰트로 돌아가도록 수정

* 체력바 모듈
  - 레이드에서 가끔 적용이 안되던 문제 개선 

* 오라 하이라이트 모듈
  - 기본동작은 체력바의 색상을 변경하는데 추가로 테두리 반짝임 옵션을 추가함 (옵션에서 체력바 색상, 테두리 반짝임을 각각 체크할수 있음)

* 초과흡수 모듈
  - 보호막(흡수량)이 최대 체력을 넘어갈때 인디케이터의 위치를 지정
    - 블리자드 기본: 체력바의 우측끝
    - RFS 기본: 체력바에서 흡수량 만큼 왼쪽으로 이동
    - 추가옵션: 최대 체력을 초과한 만큼만 왼쪽으로 이동

* 징표 모듈 (추가)
  - 레이드 프레임에 징표 아이콘 표시 모듈

* 솔로 모듈 (추가)
  - 혼자서 게임할때도 레이드 프레임을 표시하는 모듈 

* 정렬 모듈 (추가)
  - 파티원의 순서를 원하는대로 변경하는 모듈

* 오라 모듈
  - 블리자드 기본 오라 프레임 대신 별도로 생성한 오라 프레임을 사용함 (taint 이슈 때문)
  - 오라 프레임 갯수 증가
  - 프레임 계층 수정 옵션 추가
  - 바아이콘 형식의 오라 프레임 추가 (기존 블리자드 기본 형식도 선택가능)
  - 툴팁 표시 on/off + 툴팁 위치 옵션 (마우스 위치 or 기본 툴팁 위치)
  - 오라 갱신시 점프 애니메이션 추가
  - 오라 position에 프레임을 부착할 프레임 선택,아이콘 크기,투명도,반짝임 옵션 추가
  - 오라 그룹 추가 (오라 position과의 차이점은 여러개의 aura를 등록할수 있음)
  - 버프 모듈에 디버프 모듈의 increase 적용
  - 디버프 모듈에 버프 모듈의 오라 position 적용
  - 회복 드루이드 전용 기능 추가 (특화스택표시, 강화된 회복,재생,급성 추적)

* 오라필터 모듈 (추가)
  - 2.22.2에 추가한 모듈인데, 2.22.4에 추가된 Blacklist, Watchlist를 대체함
  - 블리자드의 오라 표시 설정을 변경해서 필터링 되던 오라를 보이게 하거나, 표시되던 오라를 보이지 않게 함
  - 타인의 버프도 표시 가능
  - 오라 모듈이 활성화 되었을때는 오라 표시 순서, 투명도, 반짝임 옵션도 설정할수 있음

* Blacklist, Watchlist 모듈 삭제
  - 오라필터 모듈이 대체함 
























* aura filter 추가 (블랙리스트 대체)
  - 블랙리스트 기능
  - 블리자드 기본 설정에서 숨김 처리되어 있는 걸 보이게 할때
  - 다른 사람이 건 버프를 볼때
  - 전투중에만 숨기거나, 전투중에도 보이게 할때
  - aura 표시 우선순위, 반짝임, 투명도 설정

buff/debuff 쪽은 수정한게 많아서 ...
taint에러를 피하기 위해 기본 aura frame은 숨김처리하고 별도의 aura frame을 생성해서 사용
aura frame 갯수 증감 (0으로 설정시 표시 안함)
aura frame 종류 2가지 (swipe 모양이 원형, 바형)
aura refresh될때 폴짝뜀
aura frame 반짝임
buff increase
debuff position 
aura group 기능
aura position / group에 부착위치, 크기, 반짝임, 투명, 우선순위 
debuff type에 따라 지속시간 색상 변경
debuff border 색상 설정 (블자 설정은 기본적으로 type에 따라 다른색상이 적용되는데 type이 없는경우 출혈과 같은 빨간색으로 표시된다)
회드용 옵션 추가 (강화된 aura 표시, 특화스택 표시)

* solo 모듈 추가
  혼자게임할때또 레이드 프레임 표시 

* raidmark 모듈 추가
  레이드 프레임이 징표 표시

* overabsorb 모듈에 spark위치 옵션 추가
  바위치.. 블자 기본은 우측끝이고, RFS기본은 흡수량만큼 왼쪽으로 이동인데, 추가로 넘친만큼만 왼쪽으로 이동옵션을 넣음

* sort 모듈 추가
  파티원 정렬순서를 내입맛에 맞게 변경

* aura highlight 에 반짝임 추가 / missing buff에 다른 사람의 버프도 포함


* 미니맵 아이콘 추가
* 설정 > 애드온 설정에 항목 추가
* 전투중 옵션창 명령시 끝나고 열림
* 다국어 지원 (한국어 지원)
* roleicon,fonts쪽에 부착위치 관련 추가 옵션 추가
* 몇몇 버그들 수정










1. 일단 계수부터 맞춰야 한다.

재생 = 주문력 * 계수 -> 툴팁에 나오는 수치 보고 계산하면 편함
회복 = 주문력 * 계수 -> 툴팁에 나오는 수치는 가속의 영향을 받는다 
급성 = 계산불가


특성이 곱연산인지 합연산인지 판단이 필요하다 

공용특성 -> 합연산
클래스특성 -> 곱연산?
















재생

SPELL_CAST_START
SPELL_HEAL                  -> 이걸로 몇% 강화되었는지 판단가능
SPELL_AURA_APPLIED
SPELL_CAST_SUCCESS
UNIT_AURA
SPELL_PERIODIC_HEAL         -> 이걸로 판단할경우 무성한 생장 특성 찍었는지 판단이 필요함
SPELL_PERIODIC_HEAL

---

급성

SPELL_CAST_START
 SPELL_AURA_APPLIED
 UNIT_AURA
SPELL_CAST_SUCCESS
SPELL_PERIODIC_HEAL         -> 첫틱 힐량으로 몇% 강화인지 판단 / 기본힐량 계산시 재발생 특성감안할것



회복

SPELL_AURA_APPLIED
SPELL_PERIODIC_HEAL         -> 첫틱 힐량으로 % 판단 
SPELL_CAST_SUCCES
UNIT_AURA
SPELL_PERIODIC_HEAL         
SPELL_PERIODIC_HEAL



재생:
SPELL_HEAL 시 %값 초기화 (이때 %계산해서 설정해둠)
-> 이후 UNIT_AURA가 걸릴때 사전에 % 계산해둔것 적용 


급성:
SPELL_CAST_SUCCES 시 %값 초기화 
-> 이후 SPELL_PERIODIC_HEAL에서 %가 없는경우에 설정  -> onHideAll 실행해서 반영 


회복:
SPELL_CAST_SUCCES 시 %값 초기화 
SPELL_PERIODIC_HEAL 시 %가 없으면 힐량으로 %계산(특성 반영) -> onHideAll 실행해서 반영 


제생첫힐,급성 힐량 계산

지능 * 힐량% * (특화중첩수 * (1+특화%)) * 유연% 



회복 힐량 계산

지능 * 재생힐량% * (1 + 재발생특화포인트*10%) * (특화중첩수 * (1+특화%)) * 유연% 





내가 시전한것 -> 
if subevent == "SPELL_AURA_APPLIED" then
    특화증가
elseif subevent == "SPELL_AURA_REMOVED" then
    특화감소



지능,2차스탯 변경여부는?
-> player에게 버프or디버프가 걸리면 dirty flag 설정


힐량계산은 한번 계산하면 캐시에 저장해둬



추적해야 하는것은
1. UNIT_AURA
1) player를 대상이면 무조건 dirty=true 
2) player가 시전한경우 -> 각 대상자의 aura에 저장해두고, 그거랑 별개로 특화 스택수 저장해둘것


2. CLEU
1) SPELL_CAST_SUCCES
   급성,회복 -> 강화% 초기화 

2) SPELL_HEAL
   재생 -> 강화% 계산 -> 미리 입력

3) SPELL_PERIODIC_HEAL
   급성,회복 -> 강화% 계산해서 입력 -> 버프 새로 그리기 


